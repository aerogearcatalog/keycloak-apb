FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGtleWNsb2FrLWFwYgpkZXNjcmlwdGlvbjogSWRlbnRpdHkgTWFu\
YWdlbWVudCAtIElkZW50aXR5IGFuZCBBY2Nlc3MgTWFuYWdlbWVudApiaW5kYWJsZTogVHJ1ZQph\
c3luYzogcmVxdWlyZWQKdGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCiAgLSBtb2JpbGUtY2xpZW50\
LWVuYWJsZWQKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IElkZW50aXR5IE1hbmFnZW1lbnQKICBp\
bWFnZVVybDogImh0dHBzOi8vcGJzLnR3aW1nLmNvbS9wcm9maWxlX2ltYWdlcy83MDIxMTk4MjE5\
NzkzNDQ4OTcvb0FDMDVjRUJfNDAweDQwMC5wbmciCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBz\
Oi8vZG9jcy5hZXJvZ2Vhci5vcmcvZXh0ZXJuYWwvYXBiL2tleWNsb2FrLmh0bWwiCiAgcHJvdmlk\
ZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4iCiAgc2RrLWRvY3MtYW5kcm9pZDogImh0dHBz\
Oi8vZG9jcy5hZXJvZ2Vhci5vcmcvZXh0ZXJuYWwvYXBiL2lkbS9hbmRyb2lkLmh0bWwiCiAgc2Rr\
LWRvY3MtY29yZG92YTogImh0dHBzOi8vZG9jcy5hZXJvZ2Vhci5vcmcvZXh0ZXJuYWwvYXBiL2lk\
bS9jb3Jkb3ZhLmh0bWwiCiAgc2RrLWRvY3MtaW9zOiAiaHR0cHM6Ly9kb2NzLmFlcm9nZWFyLm9y\
Zy9leHRlcm5hbC9hcGIvaWRtL2lvcy5odG1sIgogIHNkay1kb2NzLXhhbWFyaW46ICJodHRwczov\
L2RvY3MuYWVyb2dlYXIub3JnL2V4dGVybmFsL2FwYi9pZG0veGFtYXJpbi5odG1sIgogIHNlcnZp\
Y2VOYW1lOiBrZXljbG9hawpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9u\
OiBEZXBsb3kga2V5Y2xvYWsKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBtb2Jp\
bGVjbGllbnRfYmluZF9wYXJhbWV0ZXJzX2RhdGE6CiAgICAgICAgLSAneyJuYW1lIjogIkNMSUVO\
VF9JRCIsICJ2YWx1ZSI6ICJtZXRhZGF0YS5uYW1lIiwgInR5cGUiOiAicGF0aCJ9JwogICAgICAg\
IC0gJ3sibmFtZSI6ICJDTElFTlRfVFlQRSIsICJ2YWx1ZSI6ICJwdWJsaWMiLCAidHlwZSI6ICJk\
ZWZhdWx0In0nCiAgICAgIHNlcnZpY2VpbnN0YW5jZV9iaW5kX3BhcmFtZXRlcnNfZGF0YToKICAg\
ICAgICAtICd7Im5hbWUiOiAiQ0xJRU5UX0lEIiwgInZhbHVlIjogIm1ldGFkYXRhLm5hbWUiLCAi\
dHlwZSI6ICJwYXRoIn0nCiAgICAgICAgLSAneyJuYW1lIjogIkNMSUVOVF9UWVBFIiwgInZhbHVl\
IjogImJlYXJlciIsICJ0eXBlIjogImRlZmF1bHQifScKICAgIHBhcmFtZXRlcnM6CiAgICAtIG5h\
bWU6IEFETUlOX1VTRVJOQU1FCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IGFk\
bWluCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gdXNlcm5h\
bWUKICAgIC0gbmFtZTogQURNSU5fUEFTU1dPUkQKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAg\
ZGVmYXVsdDogYWRtaW4KICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBh\
ZG1pbiBwYXNzd29yZAogICAgLSBuYW1lOiBDVVNUT01fUkVBTE1fTkFNRQogICAgICByZXF1aXJl\
ZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBOYW1lIG9mIHRoZSBLZXlj\
bG9hayByZWFsbSAoZGVmYXVsdHMgdG8gY3VycmVudCBuYW1lc3BhY2UpCiAgICAtIG5hbWU6IFVT\
RV9TSEFSRURfU0VSVklDRQogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogYm9vbAog\
ICAgICB0aXRsZTogQ29ubmVjdCB0byBhbiBleGlzdGluZyBzaGFyZWQgc2VydmljZQogICAgLSBu\
YW1lOiBTSEFSRURfSE9TVAogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgIHRpdGxlOiBVUkwgb2YgdGhlIHNoYXJlZCBzZXJ2aWNlCiAgICBiaW5kX3BhcmFtZXRl\
cnM6CiAgICAtIG5hbWU6IENMSUVOVF9JRAogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0aXRs\
ZTogTW9iaWxlIGNsaWVudCBJRC9TZXJ2aWNlIElECiAgICAgIHR5cGU6IHN0cmluZwogICAgLSBu\
YW1lOiBDTElFTlRfVFlQRQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0aXRsZTogS2V5Y2xv\
YWsgY2xpZW50IHR5cGUKICAgICAgdHlwZTogZW51bQogICAgICBlbnVtOiBbJ2JlYXJlcicsICdw\
dWJsaWMnXQogICAgICBkZWZhdWx0OiBwdWJsaWMK"

COPY playbooks /opt/apb/project
COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
